{% extends "base.html" %}
{% load static %}

{% block title %}Aide-m√©moire - Calculum{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/cheatsheet.css' %}">
<script src="{% static 'js/cheatsheet.js' %}" defer></script>
<style>
	@media print {
		.print-button { display: none; }
		.cheatsheet-container { margin: 0; padding: 0; }
		.category-section { page-break-inside: avoid; }
		.algo-section { page-break-inside: avoid; }
		body { margin: 0; padding: 0; }
	}
	
	.cheatsheet-print {
		columns: 2;
		column-gap: 2rem;
		column-fill: auto;
	}
	
	@media print {
		.cheatsheet-print {
			columns: 1;
		}
	}
</style>
{% endblock %}

{% block content %}
<div class="cheatsheet-container">
	<div class="cheatsheet-header">
		<h2>üìö Aide-m√©moire</h2>
		<p>Algorithmes de comp√©tition - Calculum</p>
	</div>
	
	{% if has_algorithms %}
		<button class="print-button" id="print-btn">üñ®Ô∏è Imprimer</button>
		
		<div class="cheatsheet-print">
			{% for category in categories %}
				{% if category.algorithms.all %}
				<div class="category-section">
					<h2 class="category-title">{{ category.name }}</h2>
					{% if category.description %}
					<p class="category-description">{{ category.description }}</p>
					{% endif %}
					
					{% for algo in category.algorithms.all|dictsort:"title" %}
					<div class="algo-section">
						<h3>{{ algo.title }}</h3>
						{% if algo.description %}
						<p class="algo-description">{{ algo.description }}</p>
						{% endif %}
						{% if algo.time_complexity or algo.space_complexity %}
						<div class="complexity-info">
							{% if algo.time_complexity %}
							<span class="complexity-badge time">Time: {{ algo.time_complexity }}</span>
							{% endif %}
							{% if algo.space_complexity %}
							<span class="complexity-badge space">Space: {{ algo.space_complexity }}</span>
							{% endif %}
						</div>
						{% endif %}
						<pre><code class="language-{{ algo.language }}">{{ algo.code }}</code></pre>
					</div>
					{% endfor %}
				</div>
				{% endif %}
			{% endfor %}
			
			{% if uncategorized %}
			<div class="category-section">
				<h2 class="category-title">Autres</h2>
				{% for algo in uncategorized|dictsort:"title" %}
				<div class="algo-section">
					<h3>{{ algo.title }}</h3>
					{% if algo.description %}
					<p class="algo-description">{{ algo.description }}</p>
					{% endif %}
					{% if algo.time_complexity or algo.space_complexity %}
					<div class="complexity-info">
						{% if algo.time_complexity %}
						<span class="complexity-badge time">Time: {{ algo.time_complexity }}</span>
						{% endif %}
						{% if algo.space_complexity %}
						<span class="complexity-badge space">Space: {{ algo.space_complexity }}</span>
						{% endif %}
					</div>
					{% endif %}
					<pre><code class="language-{{ algo.language }}">{{ algo.code }}</code></pre>
				</div>
				{% endfor %}
			</div>
			{% endif %}
		</div>
	{% else %}
		<div class="no-algos">
			<h3>Aucun algorithme disponible</h3>
			<p>Les algorithmes appara√Ætront ici une fois ajout√©s dans l'administration.</p>
		</div>
	{% endif %}
</div>
{% endblock %}